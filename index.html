<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undiscord Package Util</title>
    <link rel="stylesheet" href="style.css">
    <script src="zip.min.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>

<body>
    <h1>Undiscord Package Util</h1>

    <p>A simple tool to parse through your archive and export only the selected channels / groups / private messages.
        May be useful for people who want to make data deletion requests to Discord's support team.</p>

    <div class="card">
        <span>📌</span>
        <p>
            <b>Nothing is sent to anyone</b>, it's all in YOUR browser, your data stays on your computer and your
            computer only.
        </p>
    </div>

    <div class="card">
        <span>🛜</span>
        <p>You can disable your <b>internet</b>. It still works !</p>
    </div>

    <div class="card desktop">
        <span>📖</span>
        <p>You can read your messages to get more context.</p>
    </div>

    <div class="card mobile">
        <span>📖</span>
        <p>You can <b>press long on a channel</b> to read your messages and get more context. <br><i>It may not work on some devices, refresh the page or give up</i></p>
    </div>

    <div class="card">
        <span>🤨</span>
        <p>Most 'Unknown Channels' are from servers you're not on anymore.<br>'None' are probably deleted.</p>
    </div>

    <div class="card">
        <span>🙏</span>
        <p class="github">Source code on GitHub: <a class="github-button"
                href="https://github.com/dorifor/undiscord-package-util"
                data-color-scheme="no-preference: dark; light: dark; dark: dark;" data-size="large"
                data-show-count="true" aria-label="Star dorifor/undiscord-package-util on GitHub">Star</a>
        </p>
    </div>

    <div class="card">
        <span>🇵🇸</span>
        <p>Free Palestine !</p>
    </div>

    <label for="package-file" class="file-input">
        <input type="file" name="package" id="package-file" accept=".zip">
        <span>Load Archive</span>
    </label>

    <hr>

    <section class="package-channels hidden">
        <section class="tips">
            <input type="checkbox" id="tip-none" disabled>
            <label>No channel selected</label>
            <input type="checkbox" checked="false" class="partial" id="tip-partial" disabled>
            <label>Some channels selected</label>
            <input type="checkbox" checked id="tip-full" disabled>
            <label>All channels selected</label>
        </section>

        <details class="root">
            <summary>Servers</summary>

            <ul class="channels"></ul>
        </details>

        <details class="root">
            <summary>Group Chats</summary>
            <ul class="group-chats"></ul>
        </details>

        <details class="root">
            <summary>Direct Messages</summary>
            <ul class="direct-messages"></ul>
        </details>

        <hr>
    </section>

    <section class="export hidden">
        <!-- <input type="checkbox" name="export-channels" id="export-channels">
        <label for="export-channels">Only export channels</label> -->
        <button id="export-button">Export</button>
        <button id="download-button">Download</button>
    </section>

    <textarea readonly rows="32" class="hidden"></textarea>

    <dialog class="messages-popup">
        <h3>__channelName__ messages (__length__)</h3>
        <p>Loading Messages ...</p>
        <button class="close">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-x">
                <path d="M18 6 6 18" />
                <path d="m6 6 12 12" />
            </svg>
        </button>
    </dialog>

    <script type="module" src="index.js">
    </script>
</body>

</html>